{% if name %}
	{% set title = "Component: %s"|format(name) %}
{% else %}
	{% set title = "Components" %}
{% endif %}
{% set page = "components" %}
{% set path = "../" %}

{% extends "_base.html" %}

{% block body %}
<main class="container wrap">
	<br />
	<div class="nav-wrapper white black-text">
		<div class="col s12">
			<a href="{{ path }}components.html" class="black-text">Components</a>
			<a href="#!" class="black-text">&gt;</a>
			<a href="all.html" class="black-text">All Components</a>
			{% if name %}
				<a href="#!" class="black-text">&gt;</a>
				<a href="{{ urlize(name) }}.html" class="black-text">{{ name }}</a>
			{% endif %}
		</div>
	</div>
	<div id="graph" class="expand"></div>
</main>
{% endblock %}

{% block scripts %}
{% set path = "../" %}

{% set node_query %} 
	select
		`Official Symbol`,
		`FA`
	from
		`components`
	where
		`Official Symbol`=?
	or	`Official Symbol` in (
			select `Target`
			from `edges`
			where `Source`=?)
	or	`Official Symbol` in (
			select `Source`
			from `edges`
			where `Target`=?);
{% endset %}
{% set nodes = query(node_query, name, name, name).data %}

{% set edge_query %}
	select
		`Source`,
		`Target`,
		`PMID`
	from
		`edges`
	where
		(`Source`=?
		and `Target` in (select `Official Symbol` from `components`))
	or (`Target`=?
		and `Source` in (select `Official Symbol` from `components`));
{% endset %}
{% set edges = query(edge_query, name, name).data %}

{% include "_graph.html" %}
{% endblock %}
